{"ast":null,"code":"// Cullen, Riley\n// StatisticDecorator.js\n// December 23, 2020\nimport { AWaffleChartDecorator } from \"./AWaffleChartDecorator\";\nimport Konva from 'konva';\nimport Lodash from 'lodash';\n\nclass StatisticDecorator extends AWaffleChartDecorator {\n  /**\n   * @summary     Adds a text statistic based on the encapsluated data.\n   * @description A concrete decorator class that adds a text statistic to the\n   *              canvas based on the encapsulated chart object.\n   * \n   * @requires AWaffleChartDecorator.js\n   * \n   * @param {*} chart      The chart we want to add the statistic to.\n   * @param {*} middleText The preposition between the numerator and denominator.\n   *                       (ex. 1 in 2 where in is the middleText variable).\n   * @param {*} group      The group we want to add the statistic to.\n   * @param {*} font       Font of the text statistic.\n   */\n  constructor({\n    chart,\n    middleText,\n    group = 0,\n    font = {\n      'fontSize': 8,\n      'fontFamily': 'Times New Roman, Times, serif',\n      'fontStyle': 400,\n      'textColor': 'black'\n    }\n  }) {\n    super(chart);\n    this._top = new Konva.Group();\n    this._middleText = middleText;\n    this._helper = group;\n    this._font = Lodash.cloneDeep(font);\n  }\n  /**\n   * @summary     Creates the waffle chart and adds the statistic.\n   * @description Calls the encapsulated _chart object's CreateChart method and\n   *              then uses _chart's data (numerator and denominator) to create\n   *              a text statistic.\n   */\n\n\n  CreateChart() {\n    this._chart.CreateChart();\n\n    this._CleanTop();\n\n    this._AddStatistic();\n  }\n\n  GetDecoratorSettings() {\n    return {\n      statistic: {\n        font: this._font,\n        display: {\n          middleText: this._middleText,\n          lockToChart: true\n        }\n      }\n    };\n  }\n  /**\n   * @summary     Removes child elements within _top.\n   * @description Private function that cleans the _top group so that previous\n   *              statistics are deleted.\n   */\n\n\n  _CleanTop() {\n    this._top.destroyChildren();\n  }\n  /**\n   * @summary     Adds the text statistic to the canvas.\n   * @description A private function that adds the text statistic to the canvas.\n   */\n\n\n  _AddStatistic() {\n    var text = this._numerator + ' ' + this._middleText + ' ' + this._denominator;\n\n    this._top.add(new Konva.Text({\n      text: text,\n      fontSize: this._font.fontSize,\n      fontFamily: this._font.fontFamily,\n      fontStyle: this._font.fontStyle,\n      fill: this._font.textColor\n    }));\n\n    if (this._helper === 0) this._group.add(this._top);else this._helper.add(this._top);\n  }\n\n}\n\nexport { StatisticDecorator };","map":{"version":3,"sources":["/Users/mialee/Documents/GitHub/ShareNWWebtool/src/js/Charts/WaffleChart/Decorators/StatisticDecorator.js"],"names":["AWaffleChartDecorator","Konva","Lodash","StatisticDecorator","constructor","chart","middleText","group","font","_top","Group","_middleText","_helper","_font","cloneDeep","CreateChart","_chart","_CleanTop","_AddStatistic","GetDecoratorSettings","statistic","display","lockToChart","destroyChildren","text","_numerator","_denominator","add","Text","fontSize","fontFamily","fontStyle","fill","textColor","_group"],"mappings":"AAAA;AACA;AACA;AAEA,SAASA,qBAAT,QAAsC,yBAAtC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;;AAEA,MAAMC,kBAAN,SAAiCH,qBAAjC,CACA;AACI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACII,EAAAA,WAAW,CAAC;AAACC,IAAAA,KAAD;AAAQC,IAAAA,UAAR;AAAoBC,IAAAA,KAAK,GAAG,CAA5B;AAA+BC,IAAAA,IAAI,GAAI;AAAC,kBAAa,CAAd;AAC/C,oBAAe,+BADgC;AACC,mBAAc,GADf;AAE/C,mBAAc;AAFiC;AAAvC,GAAD,EAGX;AACI,UAAMH,KAAN;AACA,SAAKI,IAAL,GAAY,IAAIR,KAAK,CAACS,KAAV,EAAZ;AACA,SAAKC,WAAL,GAAmBL,UAAnB;AACA,SAAKM,OAAL,GAAeL,KAAf;AACA,SAAKM,KAAL,GAAaX,MAAM,CAACY,SAAP,CAAiBN,IAAjB,CAAb;AACH;AAED;AACJ;AACA;AACA;AACA;AACA;;;AACIO,EAAAA,WAAW,GACX;AACI,SAAKC,MAAL,CAAYD,WAAZ;;AACA,SAAKE,SAAL;;AACA,SAAKC,aAAL;AACH;;AAEDC,EAAAA,oBAAoB,GACpB;AACI,WAAO;AACHC,MAAAA,SAAS,EAAE;AACPZ,QAAAA,IAAI,EAAE,KAAKK,KADJ;AAEPQ,QAAAA,OAAO,EAAE;AACLf,UAAAA,UAAU,EAAE,KAAKK,WADZ;AAELW,UAAAA,WAAW,EAAE;AAFR;AAFF;AADR,KAAP;AASH;AAED;AACJ;AACA;AACA;AACA;;;AACIL,EAAAA,SAAS,GACT;AACI,SAAKR,IAAL,CAAUc,eAAV;AACH;AAED;AACJ;AACA;AACA;;;AACIL,EAAAA,aAAa,GACb;AACI,QAAIM,IAAI,GAAG,KAAKC,UAAL,GAAkB,GAAlB,GAAwB,KAAKd,WAA7B,GAA2C,GAA3C,GAAiD,KAAKe,YAAjE;;AACA,SAAKjB,IAAL,CAAUkB,GAAV,CAAc,IAAI1B,KAAK,CAAC2B,IAAV,CAAe;AACzBJ,MAAAA,IAAI,EAAEA,IADmB;AAEzBK,MAAAA,QAAQ,EAAE,KAAKhB,KAAL,CAAWgB,QAFI;AAGzBC,MAAAA,UAAU,EAAE,KAAKjB,KAAL,CAAWiB,UAHE;AAIzBC,MAAAA,SAAS,EAAE,KAAKlB,KAAL,CAAWkB,SAJG;AAKzBC,MAAAA,IAAI,EAAE,KAAKnB,KAAL,CAAWoB;AALQ,KAAf,CAAd;;AAQA,QAAI,KAAKrB,OAAL,KAAiB,CAArB,EAAwB,KAAKsB,MAAL,CAAYP,GAAZ,CAAgB,KAAKlB,IAArB,EAAxB,KACK,KAAKG,OAAL,CAAae,GAAb,CAAiB,KAAKlB,IAAtB;AACR;;AA9EL;;AAiFA,SAASN,kBAAT","sourcesContent":["// Cullen, Riley\n// StatisticDecorator.js\n// December 23, 2020\n\nimport { AWaffleChartDecorator } from \"./AWaffleChartDecorator\";\nimport Konva from 'konva';\nimport Lodash from 'lodash';\n\nclass StatisticDecorator extends AWaffleChartDecorator\n{\n    /**\n     * @summary     Adds a text statistic based on the encapsluated data.\n     * @description A concrete decorator class that adds a text statistic to the\n     *              canvas based on the encapsulated chart object.\n     * \n     * @requires AWaffleChartDecorator.js\n     * \n     * @param {*} chart      The chart we want to add the statistic to.\n     * @param {*} middleText The preposition between the numerator and denominator.\n     *                       (ex. 1 in 2 where in is the middleText variable).\n     * @param {*} group      The group we want to add the statistic to.\n     * @param {*} font       Font of the text statistic.\n     */\n    constructor({chart, middleText, group = 0, font =  {'fontSize' : 8, \n        'fontFamily' : 'Times New Roman, Times, serif', 'fontStyle' : 400,\n        'textColor' : 'black'}})\n    {\n        super(chart);\n        this._top = new Konva.Group();\n        this._middleText = middleText;\n        this._helper = group;\n        this._font = Lodash.cloneDeep(font);\n    }\n\n    /**\n     * @summary     Creates the waffle chart and adds the statistic.\n     * @description Calls the encapsulated _chart object's CreateChart method and\n     *              then uses _chart's data (numerator and denominator) to create\n     *              a text statistic.\n     */\n    CreateChart()\n    {\n        this._chart.CreateChart();\n        this._CleanTop();\n        this._AddStatistic();\n    }\n\n    GetDecoratorSettings()\n    {\n        return {\n            statistic: {\n                font: this._font,\n                display: {\n                    middleText: this._middleText,\n                    lockToChart: true,\n                }\n            }\n        }\n    }\n\n    /**\n     * @summary     Removes child elements within _top.\n     * @description Private function that cleans the _top group so that previous\n     *              statistics are deleted.\n     */\n    _CleanTop()\n    {\n        this._top.destroyChildren();\n    }\n\n    /**\n     * @summary     Adds the text statistic to the canvas.\n     * @description A private function that adds the text statistic to the canvas.\n     */\n    _AddStatistic()\n    {  \n        var text = this._numerator + ' ' + this._middleText + ' ' + this._denominator;\n        this._top.add(new Konva.Text({\n            text: text,\n            fontSize: this._font.fontSize,\n            fontFamily: this._font.fontFamily,\n            fontStyle: this._font.fontStyle,\n            fill: this._font.textColor,\n        }));\n\n        if (this._helper === 0) this._group.add(this._top);\n        else this._helper.add(this._top);\n    }\n}\n\nexport { StatisticDecorator };"]},"metadata":{},"sourceType":"module"}