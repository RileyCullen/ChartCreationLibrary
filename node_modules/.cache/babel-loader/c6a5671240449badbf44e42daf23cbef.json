{"ast":null,"code":"// Cullen, Riley\n// LineXAxisDecorator\n// May 13, 2021\nimport { ALineChartDecorator } from \"./ALineChartDecorator\";\nimport Konva from 'konva';\nimport Lodash from 'lodash';\n\nclass LineXAxisDecorator extends ALineChartDecorator {\n  /**\n   * @summary     Adds a x-axis to the chart.\n   * @description Creates a x-axis in Konva.JS and adds it to the chart.\n   * \n   * @param {ALineChart} chart           The chart we want to decorate.\n   * @param {string}     axisLabel       The axis label.\n   * @param {string}     option          Determines which part of the date we display\n   *                                     on the x axis tick labels.\n   * @param {double}     lineColor       The color of the axis.\n   * @param {double}     lineStrokeWidth The size of the axis.\n   * @param {double}     tickStrokeWidth The size of the ticks.\n   * @param {JSON Array} font            Font used to display the axis text.\n   */\n  constructor({\n    chart,\n    axisLabel = 'none',\n    option = 'Year',\n    lineColor = 'black',\n    lineStrokeWidth = 1,\n    tickStrokeWidth = 0.5,\n    font = {\n      fontSize: 10,\n      fontFamily: 'Times New Roman, Times, serif',\n      textColor: 'black'\n    }\n  }) {\n    super(chart);\n    this._axisLabel = axisLabel;\n    this._axisColor = lineColor;\n    this._lineStrokeWidth = lineStrokeWidth;\n    this._tickStrokeWidth = tickStrokeWidth;\n    this._font = Lodash.cloneDeep(font);\n    this._option = option;\n  }\n  /**\n   * @summary     Creates a chart with an x-axis.\n   */\n\n\n  CreateChart() {\n    this._chart.CreateChart();\n\n    this._CreateXAxis();\n  }\n\n  GetDecoratorSettings() {\n    return {\n      xAxis: {\n        font: this._font,\n        axis: {\n          label: this._axisLabel,\n          color: this._axisColor,\n          axisStrokeWidth: this._lineStrokeWidth,\n          axisTickWidth: this._tickStrokeWidth\n        },\n        display: 'Year'\n      }\n    };\n  }\n  /**\n   * @summary     Helper function that calls _CreateAxis, _CreateTicks, _CreateAxisLabel.\n   */\n\n\n  _CreateXAxis() {\n    this._CreateAxis();\n\n    var maxHeight = this._CreateTicks();\n\n    this._CreateAxisLabel(maxHeight);\n  }\n  /**\n   * @summary Creates the x-axis using Konva.js.\n   */\n\n\n  _CreateAxis() {\n    var helper = new Konva.Group();\n\n    this._group.add(helper);\n\n    helper.add(new Konva.Line({\n      points: [0 - this._internalOffsetX, this._chartHeight - this._internalOffsetY, this._chartWidth + 3 * this._internalOffsetX, this._chartHeight - this._internalOffsetY],\n      stroke: this._axisColor,\n      strokeWidth: this._lineStrokeWidth\n    }));\n  }\n  /**\n   * @summary Creates the tick marks and tick mark labels.\n   * @returns The max height of the tick marks + the tick mark labels.\n   */\n\n\n  _CreateTicks() {\n    var helper = new Konva.Group();\n\n    var textHeight = this._GetFontSize('M', this._font);\n\n    this._group.add(helper);\n\n    this._xScale.domain().forEach(d => {\n      helper.add(new Konva.Line({\n        points: [this._xScale(d) + this._internalOffsetX, this._chartHeight - this._internalOffsetY, this._xScale(d) + this._internalOffsetX, this._chartHeight + 6 - this._internalOffsetY],\n        stroke: this._axisColor,\n        strokeWidth: this._tickStrokeWidth\n      })); // clean text \n\n      var label = d;\n      console.log(label);\n\n      var textWidth = this._GetFontSize(label, this._font);\n\n      var text = new Konva.Text({\n        text: label,\n        fill: this._font.textColor,\n        fontSize: this._font.fontSize,\n        fontFamily: this._font.fontFamily,\n        x: this._xScale(d) - textWidth / 2 + this._internalOffsetX,\n        y: this._chartHeight + textHeight - this._internalOffsetY\n      });\n      helper.add(text);\n    });\n\n    return 2 * textHeight + this._chartHeight - this._internalOffsetY + 5;\n  }\n  /**\n   * @summary Creates the axis label.\n   */\n\n\n  _CreateAxisLabel(maxHeight) {\n    if (this._axisLabel === 'none') return;\n\n    var textWidth = this._GetFontSize(this._axisLabel, this._font),\n        xPos = (this._chartWidth + this._internalOffsetX) / 2 - textWidth / 2,\n        yPos = maxHeight;\n\n    var textLabel = new Konva.Text({\n      x: xPos,\n      y: yPos,\n      text: this._axisLabel,\n      fontSize: this._font.fontSize,\n      fontFamily: this._font.fontFamily,\n      fill: this._font.textColor\n    });\n\n    this._group.add(textLabel);\n  }\n\n}\n\nexport { LineXAxisDecorator };","map":{"version":3,"sources":["/Users/mialee/Documents/GitHub/ShareNWWebtool/src/js/Charts/LineChart/Decorators/LineXAxisDecorator.js"],"names":["ALineChartDecorator","Konva","Lodash","LineXAxisDecorator","constructor","chart","axisLabel","option","lineColor","lineStrokeWidth","tickStrokeWidth","font","fontSize","fontFamily","textColor","_axisLabel","_axisColor","_lineStrokeWidth","_tickStrokeWidth","_font","cloneDeep","_option","CreateChart","_chart","_CreateXAxis","GetDecoratorSettings","xAxis","axis","label","color","axisStrokeWidth","axisTickWidth","display","_CreateAxis","maxHeight","_CreateTicks","_CreateAxisLabel","helper","Group","_group","add","Line","points","_internalOffsetX","_chartHeight","_internalOffsetY","_chartWidth","stroke","strokeWidth","textHeight","_GetFontSize","_xScale","domain","forEach","d","console","log","textWidth","text","Text","fill","x","y","xPos","yPos","textLabel"],"mappings":"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","sourcesContent":["// Cullen, Riley\n// LineXAxisDecorator\n// May 13, 2021\n\nimport { ALineChartDecorator } from \"./ALineChartDecorator\";\nimport Konva from 'konva';\nimport Lodash from 'lodash';\n\nclass LineXAxisDecorator extends ALineChartDecorator\n{\n    /**\n     * @summary     Adds a x-axis to the chart.\n     * @description Creates a x-axis in Konva.JS and adds it to the chart.\n     * \n     * @param {ALineChart} chart           The chart we want to decorate.\n     * @param {string}     axisLabel       The axis label.\n     * @param {string}     option          Determines which part of the date we display\n     *                                     on the x axis tick labels.\n     * @param {double}     lineColor       The color of the axis.\n     * @param {double}     lineStrokeWidth The size of the axis.\n     * @param {double}     tickStrokeWidth The size of the ticks.\n     * @param {JSON Array} font            Font used to display the axis text.\n     */\n    constructor({\n        chart,\n        axisLabel = 'none', \n        option = 'Year',\n        lineColor = 'black', \n        lineStrokeWidth = 1, \n        tickStrokeWidth = 0.5, \n        font = {\n            fontSize: 10, \n            fontFamily: 'Times New Roman, Times, serif', \n            textColor: 'black'\n        },\n    }) \n    {\n        super(chart);\n        this._axisLabel = axisLabel;\n        this._axisColor = lineColor;\n        this._lineStrokeWidth = lineStrokeWidth;\n        this._tickStrokeWidth = tickStrokeWidth;\n        this._font = Lodash.cloneDeep(font);\n        this._option = option;\n    }\n\n    /**\n     * @summary     Creates a chart with an x-axis.\n     */\n    CreateChart()\n    {\n        this._chart.CreateChart();\n        this._CreateXAxis();\n    }\n\n    GetDecoratorSettings()\n    {\n        return {\n            xAxis: {\n                font: this._font,\n                axis: {\n                    label: this._axisLabel,\n                    color: this._axisColor,\n                    axisStrokeWidth: this._lineStrokeWidth,\n                    axisTickWidth: this._tickStrokeWidth,\n                },\n                display: 'Year'\n            }\n        }\n    }\n\n    /**\n     * @summary     Helper function that calls _CreateAxis, _CreateTicks, _CreateAxisLabel.\n     */\n    _CreateXAxis()\n    {\n        this._CreateAxis();    \n        var maxHeight = this._CreateTicks();\n        this._CreateAxisLabel(maxHeight);\n    }\n\n    /**\n     * @summary Creates the x-axis using Konva.js.\n     */\n    _CreateAxis()\n    {\n        var helper = new Konva.Group();\n        this._group.add(helper);\n        helper.add(new Konva.Line({\n            points: [0 - this._internalOffsetX, this._chartHeight - this._internalOffsetY,\n                this._chartWidth + 3 * this._internalOffsetX, this._chartHeight - this._internalOffsetY],\n            stroke: this._axisColor,\n            strokeWidth: this._lineStrokeWidth,\n        }));\n    }\n\n    /**\n     * @summary Creates the tick marks and tick mark labels.\n     * @returns The max height of the tick marks + the tick mark labels.\n     */\n    _CreateTicks()\n    {\n        var helper = new Konva.Group();\n        var textHeight = this._GetFontSize('M', this._font);\n        this._group.add(helper);\n        this._xScale.domain().forEach(d => {\n            helper.add(new Konva.Line({\n                points: [this._xScale(d) + this._internalOffsetX, \n                    this._chartHeight - this._internalOffsetY, \n                    this._xScale(d) + this._internalOffsetX, \n                    this._chartHeight + 6 - this._internalOffsetY\n                ],\n                stroke: this._axisColor,\n                strokeWidth: this._tickStrokeWidth,\n            }));\n\n            // clean text \n            var label = d;\n            console.log(label)\n            var textWidth = this._GetFontSize(label, this._font);\n            var text = new Konva.Text({\n                text: label,\n                fill: this._font.textColor,\n                fontSize: this._font.fontSize,\n                fontFamily: this._font.fontFamily,\n                x: this._xScale(d) - (textWidth / 2) + this._internalOffsetX,\n                y: this._chartHeight + (textHeight) - this._internalOffsetY,\n            }) \n            helper.add(text);\n        });\n        return 2 * textHeight + this._chartHeight - this._internalOffsetY + 5;\n    }\n\n    /**\n     * @summary Creates the axis label.\n     */\n    _CreateAxisLabel(maxHeight)\n    {\n        if (this._axisLabel === 'none') return;\n\n        var textWidth = this._GetFontSize(this._axisLabel, this._font),\n            xPos = (this._chartWidth + this._internalOffsetX) / 2 - (textWidth / 2),\n            yPos = maxHeight;\n\n        var textLabel = new Konva.Text({\n            x: xPos,\n            y: yPos,\n            text: this._axisLabel,\n            fontSize: this._font.fontSize,\n            fontFamily: this._font.fontFamily,\n            fill: this._font.textColor,\n        });\n        this._group.add(textLabel);\n    }\n}\n\nexport { LineXAxisDecorator };"]},"metadata":{},"sourceType":"module"}