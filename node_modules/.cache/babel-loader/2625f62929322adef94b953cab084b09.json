{"ast":null,"code":"// Cullen, Riley\n// GraphicsHandler.js\n// July 19, 2021\nclass GraphicsHandler {\n  constructor() {\n    this._handler = [];\n    this._curr = -1;\n  }\n  /**\n   * @summary     Adds a graphic element to the handler.\n   * @description Creates a JSON object connecting the type, graphic, and group\n   *              in one location and adds that JSON object to the handler.\n   * \n   * @param {string}      type    The type of graphic element. This can either\n   *                              be 'image', 'icon', or 'header.'\n   * @param {misc}        graphic The graphic element that is added to the \n   *                              infographic. Note that this can either be a\n   *                              Konva.Image (for images and SVGs), a Konva.\n   *                              Text (for icons), or a Header object.\n   * @param {Konva.Group} group   The group that the element will be added to.\n   */\n\n\n  AddGraphic({\n    type,\n    graphic,\n    group\n  }) {\n    this.UpdateGraphic({\n      id: ++this._curr,\n      type: type,\n      graphic: graphic,\n      group: group\n    });\n  }\n  /**\n   * @summary     Removes the element at id from the handler.\n   * @summary     Calls the graphic object's remove (or destroy) function, which\n   *              removes the instance from the infographic. Then, the instance\n   *              is removed from the handler.\n   * @param {int} id The index of the handler we want to access.\n   */\n\n\n  RemoveHandlerElem(id) {\n    if (id > this._curr || id < 0) return;\n\n    switch (this._handler[id].type) {\n      case 'header':\n        this._handler[id].graphic.Remove();\n\n        break;\n\n      case 'image':\n        this._handler[id].graphic.destroy();\n\n        break;\n\n      case 'icon':\n        this._handler[id].group.destroy();\n\n        break;\n\n      default:\n        break;\n    }\n\n    this._handler.splice(id, 1);\n\n    this._curr--;\n\n    this._UpdateHandlerId();\n  }\n  /**\n   * @summary Return the current index of the handler to the user.\n   * @returns An integer representing the current index of the handler.\n   */\n\n\n  GetId() {\n    return this._curr;\n  }\n  /**\n   * @summary Returns the type of the element at id to the user.\n   * \n   * @param {int} id The index of the handler we want to access.\n   * \n   * @returns A string representing the type of graphic element at index id.\n   */\n\n\n  GetType(id) {\n    return this._handler[id].type;\n  }\n\n  GetSettings(id) {\n    let obj = this._handler[id];\n\n    switch (obj.type) {\n      case 'icon':\n      case 'image':\n        return obj.graphic.getAttrs();\n\n      case 'header':\n        return obj.graphic.GetSettings();\n\n      default:\n        break;\n    }\n  }\n  /**\n   * @summary     Updates the handler at index id.\n   * @description Replaces the handler at index id with the parameterized values.\n   */\n\n\n  UpdateGraphic({\n    id,\n    type,\n    graphic,\n    group\n  }) {\n    this._handler[id] = {\n      type: type,\n      graphic: graphic,\n      group: group\n    };\n    group.setAttr('id', id);\n    group.setAttr('name', 'Graphic ' + type);\n\n    switch (type) {\n      case 'header':\n        graphic.CreateHeader();\n        break;\n\n      case 'tooltip':\n        graphic.CreateToolTip();\n        break;\n\n      case 'icon':\n        group.add(graphic);\n        break;\n\n      default:\n        break;\n    }\n\n    ;\n  }\n\n  UpdateGraphicSettings({\n    id,\n    settings\n  }) {\n    let elem = this._handler[id];\n\n    switch (elem.type) {\n      case 'header':\n        elem.graphic.UpdateHeader(settings);\n        elem.graphic.CreateHeader();\n        break;\n\n      case 'image':\n        elem.graphic.clearCache();\n        elem.graphic.cache();\n        elem.graphic.setAttrs(settings);\n        break;\n\n      case 'icon':\n        elem.graphic.setAttrs(settings);\n        break;\n\n      default:\n        break;\n    }\n  }\n  /**\n   * @summary     Updates the ids of each object in the handler.\n   * @description See summary. This function is typically called when an object\n   *              is removed from the handler. In this case, when the array elements\n   *              are restructured, the groups (which are used to access them on\n   *              the infog) must be explicitly updated.\n   */\n\n\n  _UpdateHandlerId() {\n    this._handler.forEach((d, i) => {\n      d.group.setAttr('id', i);\n    });\n  }\n\n}\n\nexport { GraphicsHandler };","map":{"version":3,"sources":["/Users/mialee/Documents/GitHub/ShareNWWebtool/src/js/Handlers/GraphicsHandler.js"],"names":["GraphicsHandler","constructor","_handler","_curr","AddGraphic","type","graphic","group","UpdateGraphic","id","RemoveHandlerElem","Remove","destroy","splice","_UpdateHandlerId","GetId","GetType","GetSettings","obj","getAttrs","setAttr","CreateHeader","CreateToolTip","add","UpdateGraphicSettings","settings","elem","UpdateHeader","clearCache","cache","setAttrs","forEach","d","i"],"mappings":"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","sourcesContent":["// Cullen, Riley\n// GraphicsHandler.js\n// July 19, 2021\n\nclass GraphicsHandler\n{\n    constructor()\n    {\n        this._handler = [];\n        this._curr = -1;\n    }\n\n    /**\n     * @summary     Adds a graphic element to the handler.\n     * @description Creates a JSON object connecting the type, graphic, and group\n     *              in one location and adds that JSON object to the handler.\n     * \n     * @param {string}      type    The type of graphic element. This can either\n     *                              be 'image', 'icon', or 'header.'\n     * @param {misc}        graphic The graphic element that is added to the \n     *                              infographic. Note that this can either be a\n     *                              Konva.Image (for images and SVGs), a Konva.\n     *                              Text (for icons), or a Header object.\n     * @param {Konva.Group} group   The group that the element will be added to.\n     */\n    AddGraphic({type, graphic, group})\n    {\n        this.UpdateGraphic({\n            id: ++this._curr,\n            type: type,\n            graphic: graphic,\n            group: group\n        });\n    }\n\n    /**\n     * @summary     Removes the element at id from the handler.\n     * @summary     Calls the graphic object's remove (or destroy) function, which\n     *              removes the instance from the infographic. Then, the instance\n     *              is removed from the handler.\n     * @param {int} id The index of the handler we want to access.\n     */\n    RemoveHandlerElem(id)\n    {\n        if (id > this._curr || id < 0) return;\n        switch(this._handler[id].type) {\n            case 'header':\n                this._handler[id].graphic.Remove();\n                break;\n            case 'image':\n                this._handler[id].graphic.destroy();\n                break;\n            case 'icon':\n                this._handler[id].group.destroy();\n                break;\n            default: \n                break;\n        }\n\n        this._handler.splice(id, 1);\n        this._curr--;\n        this._UpdateHandlerId();\n    }\n    \n    /**\n     * @summary Return the current index of the handler to the user.\n     * @returns An integer representing the current index of the handler.\n     */\n    GetId() { return this._curr; }\n\n    /**\n     * @summary Returns the type of the element at id to the user.\n     * \n     * @param {int} id The index of the handler we want to access.\n     * \n     * @returns A string representing the type of graphic element at index id.\n     */\n    GetType(id) { return this._handler[id].type; }\n\n    GetSettings(id)\n    {\n        let obj = this._handler[id];\n        switch(obj.type) {\n            case 'icon':\n            case 'image':\n                return obj.graphic.getAttrs();\n            case 'header':\n                return obj.graphic.GetSettings();\n            default:\n                break;\n        }\n    }\n\n    /**\n     * @summary     Updates the handler at index id.\n     * @description Replaces the handler at index id with the parameterized values.\n     */\n    UpdateGraphic({id, type, graphic, group})\n    {\n        this._handler[id] = {\n            type: type,\n            graphic: graphic,\n            group: group,\n        }\n        group.setAttr('id', id);\n        group.setAttr('name', 'Graphic ' + type)\n\n        switch(type) {\n            case 'header':\n                graphic.CreateHeader();\n                break;\n            case 'tooltip':\n                graphic.CreateToolTip();\n                break;\n            case 'icon': \n                group.add(graphic);\n                break;\n            default:\n                break;\n        }; \n    }\n\n    UpdateGraphicSettings({id, settings})\n    {\n        let elem = this._handler[id];\n\n        switch(elem.type) {\n            case 'header':\n                elem.graphic.UpdateHeader(settings);\n                elem.graphic.CreateHeader();\n                break;\n            case 'image':\n                elem.graphic.clearCache();\n                elem.graphic.cache();\n                elem.graphic.setAttrs(settings);\n                break;\n            case 'icon':\n                elem.graphic.setAttrs(settings);\n                break;\n            default:\n                break;\n        }\n    }\n\n    /**\n     * @summary     Updates the ids of each object in the handler.\n     * @description See summary. This function is typically called when an object\n     *              is removed from the handler. In this case, when the array elements\n     *              are restructured, the groups (which are used to access them on\n     *              the infog) must be explicitly updated.\n     */\n    _UpdateHandlerId()\n    {\n        this._handler.forEach((d, i) => {\n            d.group.setAttr('id', i);\n        });\n    }\n}\n\nexport { GraphicsHandler };"]},"metadata":{},"sourceType":"module"}